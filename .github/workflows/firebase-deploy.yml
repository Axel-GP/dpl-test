name: Despliegue Autom谩tico a Firebase Hosting


on:
  push:
    # Se ejecuta solo cuando hay un 'push' a la rama 'main'
    branches:
      - master

# 2. Los trabajos (jobs) que se van a ejecutar
jobs:
  build_and_deploy:
    runs-on: ubuntu-latest
    environment: Producci贸n # Opcional: Define un entorno para mejor seguimiento
    
    steps:
      # Paso 1: Descargar el c贸digo del repositorio
      - name: Checkout del C贸digo
        uses: actions/checkout@v4

      # Paso 2: Configurar Node.js (necesario para las herramientas de Firebase y npm)
      - name: Configurar Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20' 
          
      # Paso 3: Instalar Firebase Tools (si no est谩n ya en el proyecto)
      - name: Instalar Firebase Tools
        run: npm install -g firebase-tools

      #  Si tu proyecto NO requiere compilaci贸n (ej. solo HTML est谩tico), 
      # puedes eliminar los siguientes dos pasos (Instalar Dependencias y Compilaci贸n).
      
      # Paso 4 (Opcional): Instalar dependencias de tu proyecto (ej. React/Vue)
      # - name: Instalar Dependencias del Proyecto
      #   run: npm install

      # Paso 5 (Opcional): Compilar la aplicaci贸n (si tienes un paso de 'build')
      # - name: Compilar Aplicaci贸n
      #   run: npm run build 
        
      # Paso 6: Despliegue a Firebase Hosting
      - name: Desplegar a Firebase Hosting
        uses: FirebaseExtended/action-hosting-deploy@v0
        with:
          # El token de despliegue que guardaste como Secreto
          firebaseServiceAccount: '${{ secrets.FIREBASE_TOKEN }}'
          # ID de tu proyecto de Firebase
          projectId: dpl-test-a49ce

          # Canal de despliegue (para el sitio principal)
          channelId: live
